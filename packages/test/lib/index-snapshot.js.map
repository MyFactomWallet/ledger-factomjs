{"version":3,"sources":["../src/index-snapshot.js"],"names":["snapshots","JSON","parse","fs","readFileSync","stepName","step","name","Error","RecordStore","fromObject","undefined","resolve","then","console","log","error","e","process","exit"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;AAIA;;;;;;AAEA,IAAMA,YAAYC,KAAKC,KAAL,CAAWC,aAAGC,YAAH,CAAgB,oCAAhB,EAAuC,MAAvC,CAAX,CAAlB;;AAEA;AACA,wBACE,gBAAQ;AACN,MAAMC,WAAWC,KAAKC,IAAtB;AACA,MAAI,EAAEF,YAAYL,SAAd,CAAJ,EAA8B;AAC5B,UAAM,IAAIQ,KAAJ,CACJ,6BACEH,QADF,GAEE,qEAHE,CAAN;AAKD;AACD,SAAO,gDAAwBI,+BAAYC,UAAZ,CAAuBV,UAAUK,QAAV,CAAvB,CAAxB,CAAP;AACD,CAXH,EAYEM,SAZF,EAaE;AAAA,SAAM,kBAAQC,OAAR,EAAN;AAAA,CAbF,EAcEC,IAdF,CAeE,YAAM;AACJC,UAAQC,GAAR,CAAY,UAAZ;AACD,CAjBH,EAkBE,aAAK;AACHD,UAAQE,KAAR,CAAcC,CAAd;AACAC,UAAQC,IAAR,CAAa,CAAb;AACD,CArBH","file":"index-snapshot.js","sourcesContent":["import \"babel-polyfill\";\nimport fs from \"fs\";\nimport getSnapshotJSONFile from \"./getSnapshotJSONFile\";\nimport {\n  createTransportReplayer,\n  RecordStore\n} from \"@ledgerhq/hw-transport-mocker\";\nimport runTests from \"./runTests\";\n\nconst snapshots = JSON.parse(fs.readFileSync(getSnapshotJSONFile(), \"utf8\"));\n\n// test node hid\nrunTests(\n  step => {\n    const stepName = step.name;\n    if (!(stepName in snapshots)) {\n      throw new Error(\n        \"snapshot not found for '\" +\n          stepName +\n          \"'.\\nPlease see packages/test/README.md intructions to record tests.\"\n      );\n    }\n    return createTransportReplayer(RecordStore.fromObject(snapshots[stepName]));\n  },\n  undefined,\n  () => Promise.resolve()\n).then(\n  () => {\n    console.log(\"ALL PASS\");\n  },\n  e => {\n    console.error(e);\n    process.exit(1);\n  }\n);\n"]}